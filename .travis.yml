sudo: required

before_install:
  - docker pull mrokkk/devel

matrix:
    include:
        - env:
            - IMAGE=mrokkk/devel
            - JOB=coverage
            - COMPILER=g++
            - CODECOV=1
          services:
            - docker

        - env:
            - IMAGE=mrokkk/devel
            - JOB=coverage
            - COMPILER=clang++
          services:
            - docker

        - env:
            - IMAGE=mrokkk/devel
            - JOB=valgrind
            - COMPILER=g++
          services:
            - docker

language: cpp

script: ./scripts/ci.sh

after_success:
    - "if [ \"$CODECOV\" ]; then bash <(curl -s https://codecov.io/bash); fi"

